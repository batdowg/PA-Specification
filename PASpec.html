<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KT PA Specification Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      padding: 20px;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      max-width: 1600px;
      margin: auto;
    }
    .header-row {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      margin-bottom: 20px;
      gap: 40px;
    }
    h1 {
      color: #E03C31;
      margin: 0;
    }
    .problem-box {
      padding: 10px;
      border: 2px solid black;
      background: white;
      min-height: 60px;
      width: 300px;
      font-family: 'Arial Black', Arial, sans-serif;
    }
    .problem-box::before {
      content: "Problem Statement";
      display: block;
      font-family: 'Arial Black', Arial, sans-serif;
      font-weight: bold;
      margin-bottom: 5px;
    }
    .spec-section {
      border: 2px solid black;
      padding: 10px;
      margin-bottom: 20px;
      position: relative;
    }
    .section-title {
      font-weight: bold;
      margin-bottom: 10px;
    }
    .spec-grid {
      display: grid;
      grid-template-columns: 300px 1fr 1fr;
      gap: 10px;
      align-items: start;
    }
    .grid-header {
      font-weight: bold;
      background-color: #222;
      color: white;
      text-align: center;
      padding: 10px;
    }
    .is-box { background-color: #C0231B; color: white; }
    .isnot-box { background-color: #0057b7; color: white; }
    .label-cell {
      background-color: #eee;
      padding: 10px;
      border: 1px solid #aaa;
      min-height: 122px;
      display: flex;
      align-items: center;
    }
    .drop-box {
      min-height: 122px;
      background-color: white;
      border: 2px solid black;
      padding: 5px;
      border-radius: 4px;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
    }
    .note {
      width: 100px;
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 6px;
      font-family: 'Arial', Arial, sans-serif;
      font-size: 13px;
      font-weight: bold;
      border-radius: 1px;
      cursor: grab;
      user-select: none;
      background-color: #fff;
      border: 1px solid black;
      color: black;
    }
      .notes-panel {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 20px;
        background: #f9f9f9;
        border: 2px solid #999;
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        cursor: move;
        width: 25vw;
        resize: both;
        overflow: auto;
        min-height: 150px;
        max-height: calc(100vh - 40px);
        box-sizing: border-box;
      }
    .notes-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .note-red { color: #C0231B; }
    .note-blue { color: #0057b7; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header-row">
      <div class="problem-box drop-box"></div>
      <h1>Problem Analysis - Specification</h1>
    </div>
        <div></div>

      <div class="spec-grid">
        <div></div>
        <div class="grid-header is-box">IS</div>
        <div class="grid-header isnot-box">IS NOT</div>
      </div>

    <div class="spec-section">
      <div class="section-title">WHAT</div>
      <div class="spec-grid">
        <div class="label-cell">What specific object(s) has the deviation?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
        <div class="label-cell">What is the specific deviation?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
      </div>
    </div>

    <div class="spec-section">
      <div class="section-title">WHERE</div>
      <div class="spec-grid">
        <div class="label-cell">Where is the object when the deviation is observed (geographically)?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
        <div class="label-cell">Where is the deviation on the object?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
      </div>
    </div>

    <div class="spec-section">
      <div class="section-title">WHEN</div>
      <div class="spec-grid">


        <div class="label-cell">When was the deviation observed first (in clock and calendar time)?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>

        <div class="label-cell">When since that time has the deviation been observed?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
        <div class="label-cell">What pattern?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>

        <div class="label-cell">When, in the object's history or life cycle, was the deviation observed first?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
      </div>
    </div>

    <div class="spec-section">
      <div class="section-title">EXTENT</div>
      <div class="spec-grid">
        <div class="label-cell">How many objects have the deviation?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
        <div class="label-cell">What is the trend in the number of objects with the deviation?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>

        <div class="label-cell">What is the size of a single deviation?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
        <div class="label-cell">What is the trend in the size?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>

        <div class="label-cell">How many instances of the deviation are on each object?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
        <div class="label-cell">What is the trend in the number of instances?</div>
        <div class="drop-box"></div>
        <div class="drop-box"></div>
      </div>
    </div>

    <div class="notes-panel">
      <h2>Drag Notes Below into Correct Boxes</h2>
      <div class="notes-grid">
        <div class="note" draggable="true">
          <span style="font-family: 'Arial Black';">PROBLEM STATEMENT:&nbsp;</span>
          <span style="font-family: Arial;">Panels have rough patches</span>
        </div>
        <div class="note note-blue" draggable="true">Some panels on some presses</div>
        <div class="note note-blue" draggable="true">All panels on all presses</div>
        <div class="note note-blue" draggable="true">More than 60 or less than 30 sq. mm.</div>
        <div class="note note-red" draggable="true">Albatross Drone Panels A, B, C, D, F, G</div>
        <div class="note note-blue" draggable="true">In shallow draw, flat, and straight areas</div>
        <div class="note note-red" draggable="true">19 May, 8:24 (Press 3)</div>
        <div class="note note-red" draggable="true">Most panels on most presses</div>
        <div class="note note-red" draggable="true">Rough patches (spots/cracks)</div>
        <div class="note note-red" draggable="true">19 May</div>
        <div class="note note-red" draggable="true">9:40 at Press 6</div>
        <div class="note note-blue" draggable="true">Between 8:25 and 9:29 at Press 4; 9:31 and after at Press 4</div>
        <div class="note note-red" draggable="true">Sporadically at Press 3</div>
        <div class="note note-blue" draggable="true">Dodo Panels, Phoenix Panels</div>
        <div class="note note-blue" draggable="true">Sporadically, periodically, or continuously at Presses 4 and 6</div>
        <div class="note note-blue" draggable="true">19 May, between 7:00 and 8:23 (Press 3)</div>
        <div class="note note-blue" draggable="true">Periodically, continuously, or single occurrence at Press 3</div>
        <div class="note note-red" draggable="true">In the corners, tightest curves</div>
        <div class="note note-red" draggable="true">Spots/cracks—Between 30 and 60 sq. mm.</div>
        <div class="note note-red" draggable="true">9:30 at Press 4</div>
        <div class="note note-red" draggable="true">NMD on trend in size</div>
        <div class="note note-blue" draggable="true">—More or less than 12% rejected on Press 6</div>
        <div class="note note-blue" draggable="true">Albatross Drone Panel E</div>
        <div class="note note-red" draggable="true">Panel—both sides</div>
        <div class="note note-blue" draggable="true">NMD</div>
        <div class="note note-blue" draggable="true">At Press 5</div>
        <div class="note note-blue" draggable="true">Out-of-dimension specifications</div>
        <div class="note note-blue" draggable="true">On concave side of deep draw curves</div>
        <div class="note note-blue" draggable="true">NMD</div>
        <div class="note note-blue" draggable="true">Ridges, pinholes, pockmarks</div>
        <div class="note note-red" draggable="true">Stable—6 of 7 panels on 3 of 4 presses</div>
        <div class="note note-blue" draggable="true">Between 6 April and 18 May</div>
        <div class="note note-blue" draggable="true">More or less than 33% of panels rejected over the course of the day</div>
        <div class="note note-red" draggable="true">Panels</div>
        <div class="note note-blue" draggable="true">Between 8:25 and 9:39 at Press 6; 9:41 and after at Press 6</div>
        <div class="note note-blue" draggable="true" style="font-size:11px;">8:25-8:42; 8:44-9:01; 9:03-9:20; 9:22-9:29; 9:31-9:46; 9:48-10:09; 10:11-10:16; 10:18-10:27; after 10:29 at Press 3</div>
        <div class="note note-red" draggable="true">NMD on trend in number of instances</div>
        <div class="note note-red" draggable="true">At presses</div>
        <div class="note note-blue" draggable="true">NMD</div>
        <div class="note note-blue" draggable="true">—More or less than 14% rejected on Press 4</div>
        <div class="note note-red" draggable="true">At Presses 3, 4, 6</div>
        <div class="note note-red" draggable="true">In deep draw areas, on convex side of curves</div>
        <div class="note note-blue" draggable="true">Increasing, decreasing</div>
        <div class="note note-red" draggable="true">After 1st stamping</div>
        <div class="note note-red" draggable="true">—14% rejected on Press 4</div>
        <div class="note note-red" draggable="true">Rough spots/tiny surface cracks</div>
        <div class="note note-red" draggable="true">—12% rejected on Press 6</div>
        <div class="note note-red" draggable="true">During production</div>
        <div class="note note-blue" draggable="true">Before stamping, after 3-4 stampings</div>
        <div class="note note-blue" draggable="true">Panel—one side only</div>
        <div class="note note-blue" draggable="true">At the test facility</div>
        <div class="note note-red" draggable="true">—33% rejected on Press 3</div>
        <div class="note note-red" draggable="true">Albatross Panels</div>
        <div class="note note-red" draggable="true">8:43, 9:02, 9:21, 9:30, 9:47, 10:10, 10:17, 10:28 at Press 3</div>
        <div class="note note-red" draggable="true">NMD on number of spots/cracks per panel</div>
        <div class="note note-blue" draggable="true">In inventory</div>
        <div class="note note-blue" draggable="true">Before production</div>
        <div class="note note-red" draggable="true">In the factory</div>
        <div class="note note-blue" draggable="true">Struts, Nose Cones</div>
        <div class="note note-blue" draggable="true">—More or less than 33% rejected on Press 3</div>
        <div class="note note-red" draggable="true">Up to 33% of panels rejected over the course of the day</div>
        <div class="note note-red" draggable="true">Single occurrence at Presses 4 and 6</div>
      </div>
    </div>
  </div>
<script>
// JS functions for drag and drop, adapted from Process Test Beta.html

document.addEventListener('DOMContentLoaded', function() {
  initializeDragAndDrop();
  makeNotesPanelDraggable();
  shuffleNotes();
});

function initializeDragAndDrop() {
  const notes = document.querySelectorAll('.note');
  const boxes = document.querySelectorAll('.drop-box');
  const notesArea = document.querySelector('.notes-grid');
  attachDragEventsToNotes(notes);
  attachDropEventsToBoxes(boxes, notesArea);
  if (notesArea) {
    attachDropEventsToNotesArea(notesArea);
  }
}

function makeNotesPanelDraggable() {
  const panel = document.querySelector('.notes-panel');
  if (!panel) return;
  const rect = panel.getBoundingClientRect();
  panel.style.left = rect.left + 'px';
  panel.style.top = rect.top + 'px';
  panel.style.right = 'auto';
  let offsetX = 0;
  let offsetY = 0;
  let isDown = false;

  panel.addEventListener('mousedown', function(e) {
    if (e.target === panel || e.target.tagName === 'H2') {
      isDown = true;
      offsetX = e.clientX - panel.getBoundingClientRect().left;
      offsetY = e.clientY - panel.getBoundingClientRect().top;
      panel.style.right = 'auto';
      panel.style.cursor = 'grabbing';
    }
  });

  document.addEventListener('mousemove', function(e) {
    if (isDown) {
      let newLeft = e.clientX - offsetX;
      let newTop = e.clientY - offsetY;
      const maxLeft = window.innerWidth - panel.offsetWidth;
      const maxTop = window.innerHeight - panel.offsetHeight;
      newLeft = Math.min(Math.max(newLeft, 0), maxLeft);
      newTop = Math.min(Math.max(newTop, 0), maxTop);
      panel.style.left = newLeft + 'px';
      panel.style.top = newTop + 'px';
    }
  });

  document.addEventListener('mouseup', function() {
    if (isDown) {
      isDown = false;
      panel.style.cursor = 'move';
    }
  });
}

function shuffleNotes() {
  const area = document.querySelector('.notes-grid');
  if (!area) return;
  const notes = Array.from(area.children);
  for (let i = notes.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [notes[i], notes[j]] = [notes[j], notes[i]];
  }
  notes.forEach(n => area.appendChild(n));
}

function attachDragEventsToNotes(notes) {
  notes.forEach(note => {
    note.addEventListener('dragstart', function(e) {
      this.classList.add('dragging');
      e.dataTransfer.setData('text/plain', '');
    });
    note.addEventListener('dragend', function() {
      this.classList.remove('dragging');
      document.querySelectorAll('.drop-box.highlight').forEach(box => {
        box.classList.remove('highlight');
      });
    });
  });
}

function attachDropEventsToBoxes(boxes, notesArea) {
  boxes.forEach(box => {
    box.addEventListener('dragover', function(e) {
      e.preventDefault();
      this.classList.add('highlight');
    });
    box.addEventListener('dragleave', function() {
      this.classList.remove('highlight');
    });
    box.addEventListener('drop', function(e) {
      e.preventDefault();
      this.classList.remove('highlight');
      const draggingNote = document.querySelector('.dragging');
      if (draggingNote) {
        this.appendChild(draggingNote);
      }
    });
  });
}

function attachDropEventsToNotesArea(area) {
  area.addEventListener('dragover', function(e) {
    e.preventDefault();
  });
  area.addEventListener('drop', function(e) {
    e.preventDefault();
    const draggingNote = document.querySelector('.dragging');
    if (draggingNote) {
      area.appendChild(draggingNote);
    }
  });
}

</script>
</body>
</html>
